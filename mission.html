<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Secret Mission</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/tailwindcss/3.3.3/cdn.min.js"></script>
    <style>
        body { background: #000; color: #0f0; font-family: 'Courier New', monospace; overflow: hidden; }
        .scan-line {
            position: fixed; top: 0; left: 0; width: 100%; height: 5px;
            background: rgba(0, 255, 0, 0.5); box-shadow: 0 0 10px #0f0;
            animation: scan 3s infinite linear; pointer-events: none; z-index: 10;
        }
        @keyframes scan { 0% {top: -10%} 100% {top: 110%} }
        
        .card {
            border: 1px solid #0f0; background: rgba(0, 20, 0, 0.9);
            padding: 20px; margin: 20px; max-width: 400px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 85%; text-align: center;
        }
        .btn {
            background: #0f0; color: #000; border: none; padding: 10px 30px;
            font-weight: bold; margin-top: 20px; cursor: pointer;
            font-family: 'Courier New', monospace;
        }
        .hidden { display: none; }
        
        /* è¯­éŸ³æŒ‰é’® */
        .audio-btn {
            position: absolute; top: 10px; right: 10px;
            border: 1px solid #0f0; background: rgba(0,255,0,0.1); color: #0f0;
            font-size: 12px; padding: 5px 10px; cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="scan-line"></div>

    <div class="card" id="envelope" onclick="openLetter()">
        <h1 class="text-2xl mb-4">CONFIDENTIAL</h1>
        <p class="text-sm mb-4">TOP SECRET // EYES ONLY</p>
        <div class="text-4xl my-6">ğŸ“©</div>
        <p class="text-xs blink">TAP TO DECRYPT</p>
    </div>

    <div class="card hidden" id="letter">
        <button class="audio-btn" onclick="playAudio()">ğŸ”Š æ’­æ”¾æŒ‡ä»¤</button>
        <h2 class="text-xl mb-4 border-b border-green-500 pb-2">MISSION #2025</h2>
        <div class="text-left text-sm leading-relaxed space-y-4" id="mission-text"></div>
        <button class="btn" onclick="acceptMission()">ACCEPT MISSION</button>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const name = params.get('name') || 'Agent';
        
        const missionContent = `
            <p>ç‰¹å·¥ ${name}ï¼š</p>
            <p>ä½ çš„åœ£è¯ç¤¼ç‰©å·²è¢«é”å®šåœ¨å…¨æ¯ç©ºé—´ä¸­ã€‚</p>
            <p><strong>è§£é”æ¡ä»¶ï¼š</strong></p>
            <p>1. æ‰¾åˆ°ä½ çš„çˆ¸çˆ¸å¦ˆå¦ˆã€‚</p>
            <p>2. ç»™ä»–ä»¬ä¸€ä¸ªå¤§å¤§çš„æ‹¥æŠ±ã€‚</p>
            <p>3. å¯¹ä»–ä»¬è¯´å£°â€œæˆ‘çˆ±ä½ â€ã€‚</p>
            <p>å®Œæˆåï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ¿€æ´»å…¨æ¯æŠ•å½±ã€‚</p>
        `;
        
        const speechContent = `ç‰¹å·¥${name}ï¼Œä½ çš„åœ£è¯ç¤¼ç‰©å·²è¢«é”å®šã€‚è§£é”æ¡ä»¶ï¼šæ‰¾åˆ°çˆ¸çˆ¸å¦ˆå¦ˆï¼Œç»™ä»–ä»¬ä¸€ä¸ªå¤§å¤§çš„æ‹¥æŠ±ï¼Œå¹¶è¯´ä¸€å£°æˆ‘çˆ±ä½ ã€‚å®Œæˆåï¼Œç‚¹å‡»æŒ‰é’®æ¿€æ´»ç¤¼ç‰©ã€‚`;

        document.getElementById('mission-text').innerHTML = missionContent;

        function playAudio() {
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(speechContent);
            u.lang = 'zh-CN'; u.rate = 1.0;
            window.speechSynthesis.speak(u);
        }

        function openLetter() {
            document.getElementById('envelope').classList.add('hidden');
            document.getElementById('letter').classList.remove('hidden');
            playAudio(); // è‡ªåŠ¨å°è¯•æ’­æ”¾
        }

        function acceptMission() {
            window.location.href = `magic.html${window.location.search}`;
        }
    </script>
</body>
</html>
