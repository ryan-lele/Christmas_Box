<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Certificate of Excellence</title>
    
    <link rel="prefetch" href="mission.html">

    <script src="https://cdn.bootcdn.net/ajax/libs/tailwindcss/3.3.3/cdn.min.js"></script>
    
    <link href="https://fonts.loli.net/css2?family=Cinzel:wght@700&family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@700&display=swap" rel="stylesheet">
    
    <style>
        body { 
            background: #1a0b00; 
            color: #3e2723; 
            font-family: "KaiTi", "STKaiti", "Noto Serif SC", serif; /* å¼ºåˆ¶æ¥·ä½“ */
            overflow: hidden; 
            margin: 0;
            /* âš¡ï¸ [æ ¸å¿ƒä¼˜åŒ– 3] è§†å£é«˜åº¦ä¿®æ­£ï¼Œå…¼å®¹ç§»åŠ¨ç«¯åŠ¨æ€æ  */
            min-height: 100vh;
            min-height: 100dvh;
        }

        /* ç¾Šçš®çº¸èƒŒæ™¯ */
        .parchment {
            position: fixed; inset: 15px; 
            background-color: #f4e4bc;
            background-image: url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.5' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.4'/%3E%3C/svg%3E");
            box-shadow: 0 0 30px rgba(0,0,0,0.8) inset, 0 0 20px rgba(0,0,0,0.5);
            border: 8px solid transparent;
            border-image: linear-gradient(to bottom right, #b8860b 0%, #8b4513 100%);
            border-image-slice: 1;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; padding: 20px;
        }
        /* å››è§’èŠ±çº¹ (è£…é¥°) */
        .corner {
            position: absolute; width: 40px; height: 40px;
            border-top: 3px solid #8b0000; border-left: 3px solid #8b0000;
        }
        .corner.tr { top: 10px; right: 10px; transform: rotate(90deg); }
        .corner.tl { top: 10px; left: 10px; }
        .corner.br { bottom: 10px; right: 10px; transform: rotate(180deg); }
        .corner.bl { bottom: 10px; left: 10px; transform: rotate(-90deg); }

       /* å°ç«  (å›¾ç‰‡ç‰ˆ) */
        .seal-img {
            width: 160px; height: 160px; 
            object-fit: cover; 
            border-radius: 50%; 
            border: 2px solid rgba(139, 0, 0, 0.3); 
            
            transform: scale(2) rotate(-20deg); 
            opacity: 0; 
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3));
            margin-top: 10px;
        }
        .seal-img.stamped { opacity: 1; transform: scale(1) rotate(-20deg); }

        .next-btn {
            margin-top: 30px; padding: 12px 40px; 
            background: linear-gradient(to bottom, #8b0000, #5a0000); 
            color: #ffd700;
            border: 1px solid #ffd700; border-radius: 50px; 
            font-family: 'Cinzel', serif; font-size: 1.1rem; letter-spacing: 1px;
            opacity: 0; pointer-events: none; transition: opacity 1s;
            box-shadow: 0 5px 15px rgba(139, 0, 0, 0.4);
            /* âš¡ï¸ [å°ä¼˜åŒ–] å¢åŠ ç‚¹å‡»åŒºåŸŸåé¦ˆ */
            active: scale(0.95);
        }

        /* æœ—è¯»æŒ‰é’® */
        .audio-btn {
            position: absolute; top: 20px; right: 20px;
            background: rgba(139, 0, 0, 0.05); border: 1px solid #8b0000; color: #8b0000;
            padding: 6px 12px; border-radius: 20px; font-weight: bold; font-size: 0.8rem;
            cursor: pointer; z-index: 50; display: flex; align-items: center; gap: 5px;
        }
        
        h1 { text-shadow: 0 2px 0 rgba(255,255,255,0.5); }
        h2 { text-shadow: 0 2px 4px rgba(0,0,0,0.1); font-family: 'Ma Shan Zheng', cursive !important; }
    </style>
</head>
<body>
    <div class="parchment" id="paper">
        <div class="corner tl"></div><div class="corner tr"></div>
        <div class="corner bl"></div><div class="corner br"></div>

        <button class="audio-btn" onclick="playAudio()">ğŸ”Š æœ—è¯»</button>

        <h1 class="text-3xl mb-1 font-bold text-yellow-900" style="font-family: 'Cinzel'">CERTIFICATE</h1>
        <div class="text-xs tracking-widest text-yellow-800 mb-4 opacity-70">OF NORTH POLE OFFICIAL LIST</div>
        
        <div class="w-2/3 h-px bg-yellow-900 mb-8 opacity-30"></div>
        
        <p class="text-lg mb-4 font-bold opacity-80">å…¹ è¯ æ˜</p>
        
        <h2 class="text-5xl mb-6 text-red-900" id="child-name">å®è´</h2>
        
        <p class="text-lg leading-loose mb-2 px-4 font-medium">
            åœ¨ 2025 å¹´åº¦è¡¨ç°ä¼˜å¼‚<br>
            è¯šå®å‹‡æ•¢ Â· å……æ»¡çˆ±å¿ƒ
        </p>
        <p class="text-sm opacity-60 mb-6">ç»ç”±åŒ—æç²¾çµå§”å‘˜ä¼šæœ€ç»ˆå®¡æ ¸</p>

        <img src="seal.png" class="seal-img" id="seal" alt="Seal">
        
        <button class="next-btn" id="btn-next" onclick="goNext()">æ¥å—ä»»åŠ¡ ACCEPT MISSION</button>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const name = params.get('name') || 'å®è´';
        document.getElementById('child-name').innerText = name;

        // ä¼˜åŒ–æœ—è¯»æ–‡æ¡ˆ
        const speechText = `ç¥è´ºä½ ï¼Œ${name}ã€‚åŒ—æå§”å‘˜ä¼šå·²ç»æ‰¹å‡†äº†ä½ çš„ç¤¼ç‰©ç”³è¯·ã€‚è¿™æ˜¯ä½ çš„å¥½å­©å­è¯ä¹¦ã€‚ç°åœ¨ï¼Œè¯·ç‚¹å‡»ä¸‹æ–¹çš„æŒ‰é’®ï¼Œæ¥å—ä½ çš„ç§˜å¯†ä»»åŠ¡ã€‚`;

        function playAudio() {
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(speechText);
            u.lang = 'zh-CN'; u.rate = 1.0; 
            const voices = window.speechSynthesis.getVoices();
            const zhVoice = voices.find(v => v.lang.includes('zh'));
            if(zhVoice) u.voice = zhVoice;
            window.speechSynthesis.speak(u);
        }

        // ç›–ç« é€»è¾‘
        let stamped = false;
        
        // è‡ªåŠ¨ç›–ç« ï¼ˆè¿›é¡µé¢1ç§’åï¼‰
        setTimeout(() => {
            if (stamped) return;
            stamped = true;
            
            document.getElementById('seal').classList.add('stamped');
            
            // ç›–ç« åŠ¨ç”»å®Œæˆåï¼Œå°è¯•æœ—è¯»ï¼ˆæ³¨ï¼šç§»åŠ¨ç«¯å¯èƒ½éœ€è¦ç”¨æˆ·äº¤äº’æ‰èƒ½æ’­æ”¾å£°éŸ³ï¼Œæ‰€ä»¥ä¿ç•™äº†é¡¶éƒ¨çš„æœ—è¯»æŒ‰é’®ï¼‰
            setTimeout(() => {
                // å°è¯•è‡ªåŠ¨æ’­æ”¾ï¼Œè‹¥è¢«æµè§ˆå™¨æ‹¦æˆªåˆ™é™é»˜å¤±è´¥ï¼Œç­‰å¾…ç”¨æˆ·ç‚¹å‡»æŒ‰é’®
                try { playAudio(); } catch(e){}
                
                // æ˜¾ç¤ºä¸‹ä¸€æ­¥æŒ‰é’®
                const btn = document.getElementById('btn-next');
                btn.style.opacity = 1;
                btn.style.pointerEvents = 'auto';
            }, 800);
        }, 800);

        window.goNext = function() {
            // ä¿ç•™URLå‚æ•°ï¼ˆåå­—å’Œè¯­è¨€ï¼‰
            window.location.href = `mission.html${window.location.search}`;
        }
        
        // é¢„åŠ è½½è¯­éŸ³åº“
        window.speechSynthesis.getVoices();
    </script>
</body>
</html>
